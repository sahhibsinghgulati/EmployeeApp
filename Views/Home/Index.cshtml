@model EmployeeApp.Models.DashboardViewModel
@using RazorKit

@{
    ViewBag.Title = "Dashboard";
}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="jumbotron text-center">
    <h1>HR Dashboard</h1>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">Employees per Department (Bar)</div>
                <div class="panel-body">
                    @(Html.Chart("barChartCanvas")
                        .Data(d => d
                            .Labels(Model.DepartmentLabels.ToArray()) // Convert List to Array
                            .Datasets(ds => ds
                                .Bar()
                                .Label("Employees")
                                .Data(Model.EmployeeCounts.ToArray()) // Convert List to Array
                                .BackgroundColor("rgba(54, 162, 235, 0.6)")
                                .BorderColor("rgba(54, 162, 235, 1)")
                                .BorderWidth(1)
                            )
                        )
                        .Options(o => o
                            .Responsive(true)
                            .Scales(s => s.Y(y => y.BeginAtZero(true)))
                        )
                        .Render()
                    )
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">Employees per Department (Pie)</div>
                <div class="panel-body">
                    @(Html.Chart("pieChartCanvas")
                        .Data(d => d
                            .Labels(Model.DepartmentLabels.ToArray())
                            .Datasets(ds => ds
                                .Pie()
                                .Data(Model.EmployeeCounts.ToArray())
                                .BackgroundColor(
                                    "#FF6384", "#36A2EB", "#FFCE56",
                                    "#4BC0C0", "#9966FF", "#FF9F40"
                                )
                            )
                        )
                        .Options(o => o
                            .Responsive(true)
                            .Plugins(p => p.Legend(l => l.Position(RazorKit.ChartJs.Position.Bottom)))
                        )
                        .Render()
                    )
                </div>
            </div>
        </div>
    </div>
</div>